# Autogenerated - DO NOT MODIFY THIS FILE DIRECTLY If you want to overwrite some
# of these values with your own customizations, please disable the alerts in the
# TUI and then add your own rule files to the <rocketpool-root>/alerting/rules
# directory.
#
# NOTE: This file uses non-default go template delimiters (triple braces) to avoid
#   conflicts with the default delimiters used in the alerting rules.

groups:
  - name: HighStorage
    rules:
      {{{- if .AlertEnabled_LowDiskSpaceCritical.Value }}}
      - alert: LowDiskSpaceCritical
        # NOTE: 50GB taken from PruneFreeSpaceRequired in rocketpool-cli's nethermind pruning (it won't prune below 50GB)
        expr: node_filesystem_avail_bytes{job="node", mountpoint="/"} / 1024^3 < 50
        labels:
          severity: critical
          job: node
        annotations:
          summary: "Device {{ $labels.device }} on instance {{ $labels.instance }} has critically low disk space"
          description: "{{ $labels.instance }} has critically low disk space. Currently has {{ humanize $value }} GB free."
      {{{- end }}}
